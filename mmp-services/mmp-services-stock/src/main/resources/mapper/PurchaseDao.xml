<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--namespace 写的就是你要实现的那个接口的路径-->
<mapper namespace="com.aaa.stock.dao.PurchaseDao">

    <update id="auditPass">
        UPDATE stock_purchase SET status=3 WHERE purchase_id=#{purchaseId}
    </update>
    <update id="auditNoPass">
        UPDATE stock_purchase SET status=4,audit_msg=#{value} WHERE purchase_id=#{purchaseId}
    </update>

    <select id="listPurchasePendingForPage" resultType="com.aaa.core.entity.Purchase">
        SELECT * FROM stock_purchase p WHERE status=2 and p.provider_id != 0
        <if test="purchaseVo.providerId != null &amp; purchaseVo.providerId != ''">
            and p.provider_id like concat('%',#{purchaseVo.providerId},'%')
        </if>
        <if test="purchaseVo.applyUserName != null &amp; purchaseVo.applyUserName != ''">
            and p.apply_user_name like concat('%',#{purchaseVo.applyUserName},'%')
        </if>
    </select>

    <select id="getPurchaseItemById" resultType="com.aaa.core.entity.PurchaseItem">
        SELECT * FROM stock_purchase_item WHERE purchase_id = #{purchaseId}
    </select>
</mapper>
